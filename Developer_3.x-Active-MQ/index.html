
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Active MQ Web Services for Kitodo - Kitodo Production Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#active-mq-web-services-for-kitodo" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Kitodo Production Documentation" class="md-header__button md-logo" aria-label="Kitodo Production Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kitodo Production Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Active MQ Web Services for Kitodo
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Kitodo Production Documentation" class="md-nav__button md-logo" aria-label="Kitodo Production Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Kitodo Production Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#jms" class="md-nav__link">
    <span class="md-ellipsis">
      JMS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      API Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-processor-skeleton-sample" class="md-nav__link">
    <span class="md-ellipsis">
      Service processor skeleton sample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processor-response" class="md-nav__link">
    <span class="md-ellipsis">
      Processor Response
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#process-creation-service" class="md-nav__link">
    <span class="md-ellipsis">
      Process Creation Service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process Creation Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mainjava" class="md-nav__link">
    <span class="md-ellipsis">
      Main.java
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processors" class="md-nav__link">
    <span class="md-ellipsis">
      Processors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Processors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#finalizestep-queue" class="md-nav__link">
    <span class="md-ellipsis">
      FinalizeStep Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#taskaction-queue" class="md-nav__link">
    <span class="md-ellipsis">
      TaskAction Queue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TaskAction Queue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-action" class="md-nav__link">
    <span class="md-ellipsis">
      Task Action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment" class="md-nav__link">
    <span class="md-ellipsis">
      COMMENT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process" class="md-nav__link">
    <span class="md-ellipsis">
      PROCESS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error_open" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR_OPEN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error_close" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR_CLOSE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close" class="md-nav__link">
    <span class="md-ellipsis">
      CLOSE
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="active-mq-web-services-for-kitodo">Active MQ Web Services for Kitodo</h1>
<h2 id="jms">JMS</h2>
<p>Active Message Queue is an open source Java Messaging (JMS) implementation provided by the Apache Software Foundation. It is intended to be used to connect software components in a flexible way. The core is the Active MQ server which can be pictured like a post office. The mail boxes are named “queue” or “topic”. Queues work as expected: A producer sends a message where a consumer can pick it up. Topics can be pictured as black boards: The main difference is: A message read from a queue is removed from the queue. A message read from a topic is still available to others. Consumer clients can actively check the server or may register listeners with the server to be notified of new messages.</p>
<h2 id="api-implementation">API Implementation</h2>
<p>This behaviour has already been implemented to Kitodo: The org.goobi.mq. ActiveMQDirector is a ServletContextListener which is registered in web.xml. On application startup, it registers all consumers from its “services” variable to the server configured in “activeMQ.hostURL”.</p>
<p>The elements of this variable are classes extending the abstract class ActiveMQProcessor. This class implements the MessageListener and provides facilities to handle exceptions and to store the consumer which is required on shutdown to disconnect.</p>
<p>To implement another web service processor, you have to implement a class which extends ActiveMQProcessor and implements its abstract void process(MapMessage). Here is the right place to do whatever your processor is intended to do. There is a class MapMessageObjectReader which shall be used to type safe retrieve complex objects from MapMessages. You must add your new class to the “services” variable of ActiveMQDirector then.</p>
<p>The Kitodo server administrator shall be in control which processors are being started, and which queue names they listen on. Implementation of this configurability is designed this way: The implementing class must pass its queue name to the constructor of the parent class. This is done by implementing the constructor like in the following skeleton. If the queue name is not configured, it will return null which will prevent the ActiveMQDirector from registering it to the server. Inside the class, the queue name is available in the global variable “queueName” which is set by the parent class. The implementation may use arbitrary “activeMQ.myService.*” entries in goobi_config.properties for configuration.</p>
<h3 id="service-processor-skeleton-sample">Service processor skeleton sample</h3>
<pre><code>package org.goobi.mq.processores;

import org.goobi.mq.*;
import de.sub.goobi.config.ConfigCore;
import de.sub.goobi.helper.enums.ReportLevel;

public class MyServiceProcessor extends ActiveMQProcessor {

    public MyServiceProcessor() {
        super(ConfigMain.getParameter(&quot;activeMQ.myService.queue&quot;, null));
    }

    @Override
    protected void process(MapMessageObjectReader args) throws Exception {
        // TODO Auto-generated method stub
    }
}
</code></pre>
<h3 id="processor-response">Processor Response</h3>
<p>Responses from processors are designed to be handled as WebServiceResult objects. Those objects are MapMessages which send themselves to a topic configured in “activeMQ.results.topic”. They consist of the Strings “queue” (the name of the queue the job ticket was sent to), “id” (a String “id” in the MapMessage which is mandatory), “level” and an optional “message”. When designing the MapMessage layout to parameterise your web service processor, please keep in mind that a String element “id” is mandatory.</p>
<p>If process() terminates without error, it is meant to have done its job successfully and a WebServiceResult with level “success” will be sent. If process() returns an exception, a WebServiceResult with level “fatal” will be sent. The exception will be returned as the “message” String. You may also use the WebServiceResult class to send messages with the levels “error”, “warn”, “info”, “debug”, “verbose” and “ludicrous” which are meant to be informative only: new WebServiceResult(queueName, args.getMandatoryString("id"), ReportLevel.INFO, "Remote host is down, trying again later.") .send();</p>
<h2 id="process-creation-service">Process Creation Service</h2>
<p>Kitodo.Production is equipped with a web service interface to automatically create new processes based on a given template. This allows the digitization process to be initiated from outside the application, for example by assigning a new digital ID to a record in a library catalogue (or—at choice of the library—by duplicating a record and assigning a new digital ID to the duplicate) and then running a script.</p>
<p>The web service infrastructure is providet by an Active MQ server (see http://activemq.apache.org/ for details) which needs to be downloaded and started. Without further configuration, it provides everything necessary on port 61616 of the machine in question.</p>
<p>The “activeMQ.hostURL” must be set in goobi_config.properties to point to this server. The “activeMQ.createNewProcess.queue” must be set to point to a queue of your choice where Kitodo.Production shall pick up orders to create new processes.</p>
<p>Orders must be javax.jms.MapMessage objects with the following key-value-pairs provided:</p>
<pre><code>String template
    name of the process template to use
String opac
    Cataloge to use for lookup
String field
    Field to look into, usually 12 (PPN)
String value
    Value to look for, id of physical medium
String id
    Ticket ID (used in log responses)
List&lt;String&gt; collections
    Collections to be selected
Map&lt;String, String&gt; userFields (optional)
    May be used to populates AdditionalField entries
</code></pre>
<p>Here is a sample java client to do the job. It expects to be passed from the command line the Active MQ host (e.g. tcp://localhost:61616), the queue name and the parameters as listed above.</p>
<p>To run this application, the following JARs from the ActiveMQ server’s /lib folder are required on the classpath:</p>
<ul>
<li>activemq-core</li>
<li>geronimo-j2ee-management_1.1_spec</li>
<li>genonimo-jms_1.1_spec</li>
<li>log4j2</li>
<li>slf4j-api</li>
<li>slf4j-log4j12</li>
</ul>
<h3 id="mainjava">Main.java</h3>
<pre><code>import java.util.*;
import javax.jms.*;
import org.apache.activemq.ActiveMQConnectionFactory;

public class Main {
    public static int main(String[] args) { try {

        // Check arguments
        if (args.length &lt; 8 || (args.length % 2) != 0) {
            System.out.println(&quot;Parameters: Active MQ host, queue name, &quot;
                    + &quot;template name, opac name,&quot;);
            System.out.println(&quot;            no. of search field, search &quot;
                    + &quot;string, digital id, collection name,&quot;);
            System.out.println(&quot;            [additional details field, &quot;
                    + &quot;value, [add. details field, value, [...&quot;);
            return 1;
        }

        // Connect to server
        Connection connection = new ActiveMQConnectionFactory(args[0])
                .createConnection();
        connection.start();
        Session session = connection.createSession(false,
                Session.AUTO_ACKNOWLEDGE);
        Destination destination = session.createQueue(args[1]);
        MessageProducer producer = session.createProducer(destination);
        producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

        // Create job ticket
        MapMessage message = session.createMapMessage();
        message.setString(&quot;template&quot;, args[2]);
        message.setString(&quot;opac&quot;, args[3]);
        message.setString(&quot;field&quot;, args[4]);
        message.setString(&quot;value&quot;, args[5]);
        message.setString(&quot;id&quot;, args[6]);
        List&lt;String&gt; collections = new ArrayList&lt;String&gt;();
        collections.add(args[7]);
        message.setObject(&quot;collections&quot;, collections);
        Map&lt;String, String&gt; userFields = new HashMap&lt;String, String&gt;();
        for (int i = 8; i &lt; args.length; i += 2)
            userFields.put(args[i], args[i + 1]);
        if (userFields.size() != 0)
            message.setObject(&quot;userFields&quot;, userFields);

        // Send job ticket
        producer.send(message);

        // Shutdown
        session.close();
        connection.close();
    } catch (Exception e) { e.printStackTrace(); return 2; }
    return 0;
}   }
</code></pre>
<h2 id="processors">Processors</h2>
<p>Kitodo.Production is equipped with a web service interface to for example automatically finalize steps. This allows external software contributing to a workflow to report their success from outside the application. Additionally, properties can be populated and a message can be added to the processes’ log (in former versions of Kitodo known as “wiki field”).</p>
<p>The <code>activeMQ.hostURL</code> must be set in <code>kitodo_config.properties</code> to point to this server. In addition, the corresponding queue must be commented out or added. </p>
<p>The web service infrastructure is provided by an Active MQ server (see http://activemq.apache.org/ for details) which needs to be downloaded and started. Without further configuration, it provides everything necessary on port 61616 of the machine in question.</p>
<p>For simplified use of ActiveMQ, a Docker image and a Java client are available here. (see https://github.com/slub/kitodo-production-activemq)</p>
<h3 id="finalizestep-queue">FinalizeStep Queue</h3>
<p>The <code>activeMQ.finaliseStep.queue</code> parameter must be commented out in <code>kitodo_config.properties</code> or added with value <code>KitodoProduction.FinalizeStep.Queue</code>.</p>
<p>Message must be javax.jms.MapMessage objects with the following key-value-pairs provided:</p>
<pre><code>String id
    ID of the step to close (do not mix up with the process ID)
Map&lt;String, String&gt; properties (optional)
    May be used to populates properties
String message
    Message to be added to the processes’ log.
</code></pre>
<h3 id="taskaction-queue">TaskAction Queue</h3>
<p>The <code>activeMQ.taskAction.queue</code> parameter must be commented out in <code>kitodo_config.properties</code> or added with value <code>KitodoProduction.TaskAction.Queue</code>.</p>
<p>Message must be javax.jms.MapMessage objects with the following key-value-pairs provided:</p>
<pre><code>Integer id
   Identifier of the task
String message
    Message to be added as comment
String action
    The task action to process
Integer correctionTaskId
    Identifier of the correction task
</code></pre>
<p><em><strong>Correction Task</strong> is a task to jump back when correction is requested. The processing state of tasks between current task and correction task are set to <code>LOCKED</code> and state of correction task is set to <code>OPEN</code>. When correction is made, the correction task is set to <code>DONE</code> and the current task to <code>OPEN</code>.</em></p>
<p>Please consider the next point <a href="#task-action">Task Action</a> cause some of the keys are required for some actions and for some not.</p>
<h4 id="task-action">Task Action</h4>
<p>There are followings action with different behavior of the parameters. </p>
<h5 id="comment">COMMENT</h5>
<p>This action adds a comment to a task.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>yes</td>
<td>the task identifier as integer</td>
</tr>
<tr>
<td>message</td>
<td>yes</td>
<td>the message for comment as string</td>
</tr>
<tr>
<td>action</td>
<td>yes</td>
<td>the task action as string <code>"COMMENT"</code></td>
</tr>
</tbody>
</table>
<h5 id="process">PROCESS</h5>
<p>This action set the processing status of a task to <code>INWORK</code>. The task must be in the processing state <code>OPEN</code> to run this action.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>yes</td>
<td>the task identifier as integer</td>
</tr>
<tr>
<td>message</td>
<td>no</td>
<td>the message for comment as string</td>
</tr>
<tr>
<td>action</td>
<td>yes</td>
<td>the task action as string <code>"PROCESS"</code></td>
</tr>
</tbody>
</table>
<h5 id="error_open">ERROR_OPEN</h5>
<p>This action is used to report an error. The task must be in the processing state <code>INWORK</code> to run this action. The behaviour of this action depends on the <code>correctionTaskId</code>.</p>
<p>If the <code>correctionTaskId</code> is available, the processing state of the task is set to <code>LOCKED</code>, an error comment will be created and the processing state of correction task is set to <code>OPEN</code>.</p>
<p>If no <code>correctionTaskId</code> is set, only an error comment is created and the task remains in processing status <code>INWORK</code>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>yes</td>
<td>the task identifier as integer</td>
</tr>
<tr>
<td>message</td>
<td>yes</td>
<td>the message for comment as string</td>
</tr>
<tr>
<td>action</td>
<td>yes</td>
<td>the task action as string <code>"ERROR_OPEN"</code></td>
</tr>
<tr>
<td>correctionTaskId</td>
<td>no</td>
<td>the identifier of correction task as integer</td>
</tr>
</tbody>
</table>
<h5 id="error_close">ERROR_CLOSE</h5>
<p>This action is used to solve an error. The execution and behaviour of this action depends on the <code>correctionTaskId</code>.</p>
<p>If <code>correctionTaskId</code> is available the task must be in the processing state <code>LOCKED</code> and the processing state of the correction task will be set to <code>DONE</code>.</p>
<p>If no <code>correctionTaskId</code> is set, the task must be in the processing state <code>INWORK</code></p>
<p>In both behaviours, the processing status of the task is set to <code>OPEN</code>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>yes</td>
<td>the task identifier as integer</td>
</tr>
<tr>
<td>message</td>
<td>no</td>
<td>the message for comment as string</td>
</tr>
<tr>
<td>action</td>
<td>yes</td>
<td>the task action as string <code>"ERROR_CLOSE"</code></td>
</tr>
<tr>
<td>correctionTaskId</td>
<td>no</td>
<td>the identifier of correction task as integer</td>
</tr>
</tbody>
</table>
<h5 id="close">CLOSE</h5>
<p>This action set the processing status of a task to <code>DONE</code>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>yes</td>
<td>the task identifier as integer</td>
</tr>
<tr>
<td>message</td>
<td>no</td>
<td>the message for comment as string</td>
</tr>
<tr>
<td>action</td>
<td>yes</td>
<td>the task action as string <code>"CLOSE"</code></td>
</tr>
</tbody>
</table>
<h1 id="tood-needs-documentation">TOOD  / Needs documentation</h1>
<h2 id="creating-processes-through-activemq">Creating processes through ActiveMQ</h2>
<p>see https://github.com/kitodo/kitodo-production/pull/6183</p>
<h2 id="running-kitodoscripts-through-activemq">Running KitodoScripts through ActiveMQ</h2>
<p>see https://github.com/kitodo/kitodo-production/pull/6013</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>